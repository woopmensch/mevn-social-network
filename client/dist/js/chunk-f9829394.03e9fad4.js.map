{"version":3,"sources":["webpack:///./src/views/Settings.vue?35c8","webpack:///src/views/Settings.vue","webpack:///./src/views/Settings.vue?d457","webpack:///./src/views/Settings.vue","webpack:///./src/services/UserService.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","on","$event","preventDefault","updateUserInfo","directives","name","rawName","value","user","expression","staticStyle","domProps","target","composing","$set","_m","logout","staticRenderFns","data","status","computed","_id","state","currentUser","methods","id","UserService","fetchUserById","localStorage","clear","$store","dispatch","$router","push","fetchUserData","component","resp","url","method","crossdomain","error","console","log"],"mappings":"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","file":"js/chunk-f9829394.03e9fad4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"settings\"}},[_c('h1',{staticClass:\"uk-text-primary\"},[_vm._v(\"Settings\")]),_c('div',{staticClass:\"uk-card\"},[_c('form',{staticClass:\"uk-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.updateUserInfo($event)}}},[_c('fieldset',{staticClass:\"uk-fieldset\"},[_c('legend',{staticClass:\"uk-legend\"},[_vm._v(\"Update user info\")]),_c('div',{staticClass:\"uk-margin\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.status),expression:\"user.status\"}],staticClass:\"uk-textarea\",staticStyle:{\"resize\":\"none\"},attrs:{\"placeholder\":\"Set status\"},domProps:{\"value\":(_vm.user.status)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"status\", $event.target.value)}}})]),_c('div',{staticClass:\"uk-margin\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],staticClass:\"uk-input\",attrs:{\"type\":\"text\",\"placeholder\":\"Set name\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"name\", $event.target.value)}}})]),_vm._m(0)])])]),_c('div',{staticClass:\"uk-margin\"},[_c('button',{staticClass:\"uk-button uk-button-secondary\",on:{\"click\":_vm.logout}},[_vm._v(\"Logout\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"uk-margin\"},[_c('button',{staticClass:\"uk-button uk-button-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Update\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"settings\">\r\n        <h1 class=\"uk-text-primary\">Settings</h1>\r\n        <div class=\"uk-card\">\r\n            <form class=\"uk-form\" @submit.prevent=\"updateUserInfo\">\r\n                <fieldset class=\"uk-fieldset\">\r\n                    <legend class=\"uk-legend\">Update user info</legend>\r\n                    <div class=\"uk-margin\">\r\n                        <textarea\r\n                            class=\"uk-textarea\"\r\n                            v-model=\"user.status\"\r\n                            placeholder=\"Set status\"\r\n                            style=\"resize: none;\"\r\n                        />\r\n                    </div>\r\n                    <div class=\"uk-margin\">\r\n                        <input\r\n                            type=\"text\"\r\n                            class=\"uk-input\"\r\n                            v-model=\"user.name\"\r\n                            placeholder=\"Set name\"\r\n                        />\r\n                    </div>\r\n                    <div class=\"uk-margin\">\r\n                        <button class=\"uk-button uk-button-primary\" type=\"submit\">Update</button>\r\n                    </div>\r\n                </fieldset>\r\n            </form>\r\n        </div>\r\n        <div class=\"uk-margin\">\r\n            <button class=\"uk-button uk-button-secondary\" @click=\"logout\">Logout</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport UserService from \"../services/UserService\";\r\nexport default {\r\n    name: \"settings\",\r\n    data: function() {\r\n        return {\r\n            user: {\r\n                status: \"\",\r\n                name: \"\"\r\n            }\r\n        };\r\n    },\r\n\r\n    computed: mapState({\r\n        _id: state => state.currentUser._id\r\n    }),\r\n\r\n    methods: {\r\n        ...mapActions([\"toggleAuthState\", \"saveUserData\"]),\r\n\r\n        async fetchUserData() {\r\n            const id = this._id;\r\n            this.user = await UserService.fetchUserById(id);\r\n        },\r\n\r\n        async updateUserInfo() {\r\n            await UserService.updateUserInfo(this.user);\r\n        },\r\n\r\n        logout() {\r\n            localStorage.clear();\r\n            this.$store.dispatch(\"toggleAuthState\", false);\r\n            this.$router.push({ name: \"login\" });\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchUserData();\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=11f50272&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\r\n    HTTP\r\n} from './api';\r\nimport store from '@/store';\r\n\r\nexport default {\r\n    async fetchUserById(id) {\r\n        let resp;\r\n\r\n        try {\r\n            resp = await HTTP({\r\n                url: `/users/${id}`,\r\n                method: \"GET\",\r\n                crossdomain: true\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n        return resp.data;\r\n    },\r\n\r\n    async updateUserInfo(data) {\r\n        let resp;\r\n\r\n        try {\r\n            resp = await HTTP({\r\n                url: `/users/current/update`,\r\n                method: \"PUT\",\r\n                crossdomain: true,\r\n                data: data\r\n            })\r\n\r\n            store.dispatch('saveUserData', resp.data.user)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n        console.log(resp.data)\r\n\r\n        return resp.data\r\n    }\r\n}"],"sourceRoot":""}