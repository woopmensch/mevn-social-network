{"version":3,"sources":["webpack:///./src/services/UserService.js","webpack:///./src/views/Profile.vue?0631","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?025a","webpack:///./src/views/Profile.vue"],"names":["id","resp","url","method","crossdomain","error","console","log","data","dispatch","user","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","name","_id","status","on","fetchNewPost","_e","ref","$event","fetchPostsByUser","fetchLikedPosts","activeTab","_l","post","key","refInFor","staticRenderFns","props","components","CreatePost","Post","posts","newPostText","computed","isProfilePersonal","currentUser","userId","methods","UserService","fetchUserById","PostsService","$refs","likedPosts","classList","remove","userPosts","add","unshift","fetchUserData","sockets","deletePost","filter","postIndex","indexOf","splice","togglePostLike","targetPost","likes","newComment","postId","postComponent","postComments","comments","Object","assign","push","comment","toggleCommentLike","targetComment","deleteComment","commentIndex","watch","component"],"mappings":"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","file":"js/chunk-92d273b0.ef79df29.js","sourcesContent":["import {\r\n    HTTP\r\n} from './api';\r\nimport store from '@/store';\r\n\r\nexport default {\r\n    async fetchUserById(id) {\r\n        let resp;\r\n\r\n        try {\r\n            resp = await HTTP({\r\n                url: `/users/${id}`,\r\n                method: \"GET\",\r\n                crossdomain: true\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n        return resp.data;\r\n    },\r\n\r\n    async updateUserInfo(data) {\r\n        let resp;\r\n\r\n        try {\r\n            resp = await HTTP({\r\n                url: `/users/current/update`,\r\n                method: \"PUT\",\r\n                crossdomain: true,\r\n                data: data\r\n            })\r\n\r\n            store.dispatch('saveUserData', resp.data.user)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n        return resp.data;\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"profile\"}},[_c('h1',{staticClass:\"uk-text-primary\"},[_vm._v(\"Profile\")]),_c('div',{staticClass:\"uk-flex uk-flex-column uk-flex-center uk-flex-middle\"},[_c('span',{attrs:{\"uk-icon\":\"user\",\"width\":\"100\"}}),_c('span',{staticClass:\"uk-card-title\"},[_vm._v(_vm._s(_vm.user.name))]),_c('span',{staticClass:\"uk-text-meta\"},[_vm._v(\"@\"+_vm._s(_vm.user._id))]),_c('p',[_vm._v(_vm._s(_vm.user.status))])]),(_vm.isProfilePersonal)?_c('CreatePost',{on:{\"newPost\":_vm.fetchNewPost}}):_vm._e(),_c('ul',{staticClass:\"uk-tab\"},[_c('li',{ref:\"userPosts\",on:{\"click\":function($event){return _vm.fetchPostsByUser()}}},[_c('a',[_vm._v(\"My posts\")])]),_c('li',{ref:\"likedPosts\",on:{\"click\":function($event){return _vm.fetchLikedPosts()}}},[_c('a',[_vm._v(\"Liked posts\")])])]),(_vm.activeTab === 'userPosts')?_c('div',_vm._l((_vm.posts),function(post){return _c('Post',{key:post._id,ref:post._id,refInFor:true,staticClass:\"uk-animation-fade\",attrs:{\"post\":post}})}),1):_vm._e(),(_vm.activeTab === 'likedPosts')?_c('div',_vm._l((_vm.posts),function(post){return _c('Post',{key:post._id,ref:post._id,refInFor:true,staticClass:\"uk-animation-fade\",attrs:{\"post\":post}})}),1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"profile\">\n        <h1 class=\"uk-text-primary\">Profile</h1>\n        <div class=\"uk-flex uk-flex-column uk-flex-center uk-flex-middle\">\n            <span uk-icon=\"user\" width=\"100\"></span>\n            <span class=\"uk-card-title\">{{user.name}}</span>\n            <span class=\"uk-text-meta\">@{{user._id}}</span>\n            <p>{{user.status}}</p>\n        </div>\n        <CreatePost v-if=\"isProfilePersonal\" @newPost=\"fetchNewPost\"></CreatePost>\n        <ul class=\"uk-tab\">\n            <li ref=\"userPosts\" @click=\"fetchPostsByUser()\">\n                <a>My posts</a>\n            </li>\n            <li ref=\"likedPosts\" @click=\"fetchLikedPosts()\">\n                <a>Liked posts</a>\n            </li>\n        </ul>\n        <div v-if=\"activeTab === 'userPosts'\">\n            <Post\n                class=\"uk-animation-fade\"\n                v-for=\"post in posts\"\n                v-bind:key=\"post._id\"\n                :post=\"post\"\n                :ref=\"post._id\"\n            ></Post>\n        </div>\n        <div v-if=\"activeTab === 'likedPosts'\">\n            <Post\n                class=\"uk-animation-fade\"\n                v-for=\"post in posts\"\n                v-bind:key=\"post._id\"\n                :post=\"post\"\n                :ref=\"post._id\"\n            ></Post>\n        </div>\n    </div>\n</template>\n\n<script>\nimport CreatePost from \"../components/CreatePost\";\nimport Post from \"../components/Post\";\nimport UserService from \"../services/UserService\";\nimport PostsService from \"../services/PostsService\";\nimport { mapState } from \"vuex\";\n\nexport default {\n    props: [\"userId\"],\n    name: \"home\",\n    components: {\n        CreatePost,\n        Post\n    },\n\n    data: function() {\n        return {\n            user: {},\n            posts: [],\n            newPostText: \"\",\n            activeTab: \"userPosts\"\n        };\n    },\n\n    computed: {\n        ...mapState([\"currentUser\"]),\n        isProfilePersonal: function() {\n            return this.currentUser._id === this.userId ? true : false;\n        }\n    },\n\n    methods: {\n        async fetchUserData() {\n            this.user = await UserService.fetchUserById(this.userId);\n        },\n\n        async fetchPostsByUser() {\n            this.posts = await PostsService.fetchPostsByUser(this.userId);\n            this.activeTab = \"userPosts\";\n            this.$refs.likedPosts.classList.remove(\"uk-active\");\n            this.$refs.userPosts.classList.add(\"uk-active\");\n        },\n\n        async fetchLikedPosts() {\n            this.posts = await PostsService.fetchLikedPosts(this.userId);\n            this.activeTab = \"likedPosts\";\n            this.$refs.userPosts.classList.remove(\"uk-active\");\n            this.$refs.likedPosts.classList.add(\"uk-active\");\n        },\n\n        fetchNewPost(data) {\n            this.posts.unshift(data);\n        }\n    },\n\n    mounted() {\n        this.fetchUserData();\n        this.fetchPostsByUser();\n    },\n\n    sockets: {\n        deletePost: function(data) {\n            const post = this.posts.filter(post => post._id === data);\n            const postIndex = this.posts.indexOf(...post);\n            this.posts.splice(postIndex, 1);\n        },\n        togglePostLike: function(data) {\n            const post = this.posts.filter(\n                post => post._id === data.targetPost\n            );\n            const postIndex = this.posts.indexOf(...post);\n            this.posts[postIndex].likes = data.likes;\n        },\n        // updatePost: function(data) {\n        //     const postId = data._id;\n        //     const oldPost = this.posts.filter(i => i._id === postId);\n        //     const oldPostIndex = this.posts.indexOf(...oldPost);\n        //     Object.assign(this.posts[oldPostIndex], data);\n        // },\n        newComment: function(data) {\n            const postId = data.post._id;\n            const postComponent = this.$refs[postId][0];\n            const post = postComponent.post;\n            const postComments = postComponent.comments;\n            Object.assign(post, data.post);\n            postComments.push(data.comment);\n        },\n        toggleCommentLike: function(data) {\n            const post = this.$refs[data.targetPost];\n            const comment = post[0].comments.filter(\n                comment => comment._id === data.targetComment\n            );\n            comment[0].likes = data.likes;\n        },\n        deleteComment: function(data) {\n            const postId = data.targetPost._id;\n            const postComponent = this.$refs[postId][0];\n            const post = postComponent.post;\n            const comments = postComponent.comments;\n            const comment = comments.filter(comment => comment._id === data);\n            const commentIndex = comments.indexOf(...comment);\n            Object.assign(post, data.targetPost);\n            comments.splice(commentIndex, 1);\n        }\n    },\n\n    watch: {\n        \"$route.params.userId\": function() {\n            this.fetchUserData();\n            this.fetchPostsByUser();\n        }\n    }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=36b4b81c&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}